<div align="center"><img src="assets/screenshot.png"></div>
<h1 align="center">Compiler & Virtual Machine</h1>
<p align="center">
<strong>Compiler & Virtual Machine in Lisp</strong>
<br>2008
</p>
<br/>
<h2>About</h2>
This project was developed during my Master degree in Montpellier, France.
<br/>
This code use Lisp to create a pseudo compiler capable to compile lisp code into pseudo assembly. The code also include a virtual machine in lips capable to load the pseudo assembly code generated by the compiler.
<br/>

<h2>Installation</h2>

1. Download this project as zip and extract it
2. Download the Lisp Toolkit 

<h2>Usage</h2>

1. Use the compiler to create ASM code
    1. (load "gc.lisp") <span style="color:gray">*- load of the compiler code*</span>
    2. (load_file_gc "samples/fibo.lisp" "samples/fibo.lisp.asm") <span style="color:gray">*- Compile the lisp source code into assembly code*</span>
    3. (run_gc '(fibo5 5)) <span style="color:gray">*- Generate an assembly code to exec a command to use inside the virtual machine*</span>

2. Use the compiler to create ASM code
    1. (load "vm.lisp") <span style="color:gray">*- load of the vm code*</span>
    2. (make_vm 'test 1048576) <span style="color:gray">*- create the vm name and memory*</span>
    3. (load_file_vm 'test "samples/fibo.lisp.asm") <span style="color:gray">*- load the assembly code we want to run*</span>
        1. (apply_vm 'test '((MOVE ($ 5) R0) (PUSH R0) (MOVE ($ 1) R0) (PUSH R0) (INCR R0) (MOVE FP R1) (MOVE SP FP) (MOVE SP R2) (SUB R0 R2) (PUSH R2) (PUSH R1) (JSR (@ FIBO5)) (POP R1) (POP R2) (MOVE R1 FP) (MOVE R2 SP) (HALT)) 1) <span style="color:gray">*- use the assembly snippet code from run_gc to launch a command (here: fibo5 5) in debug mode*</span>
        2. (apply_vm 'test '((MOVE ($ 5) R0) (PUSH R0) (MOVE ($ 1) R0) (PUSH R0) (INCR R0) (MOVE FP R1) (MOVE SP FP) (MOVE SP R2) (SUB R0 R2) (PUSH R2) (PUSH R1) (JSR (@ FIBO5)) (POP R1) (POP R2) (MOVE R1 FP) (MOVE R2 SP) (HALT)) nil) <span style="color:gray">*- use the assembly snippet code from run_gc to launch a command (here: fibo5 5) in non interractive mode*</span>


<h2>Copyright</h2>
This project is licensed under the terms of the MIT license. See <a href="LICENSE">license</a>.